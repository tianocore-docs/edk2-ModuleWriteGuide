
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>3.6 Module using HII Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="37_building_the_module.html" />
    
    
    <link rel="prev" href="35_edk_ii_common_library_class.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../#edk-ii-module-writers-guide">
            
                    
                    EDK II Module Writer's Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../TABLES.html">
            
                <a href="../TABLES.html#tables">
            
                    
                    Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../FIGURES.html">
            
                <a href="../FIGURES.html#figures">
            
                    
                    Figures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../1_the_basics_of_edk_ii/">
            
                <a href="../1_the_basics_of_edk_ii/#1-the-basics-of-edk-ii">
            
                    
                    1 The Basics of EDK II
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../1_the_basics_of_edk_ii/11_overview.html">
            
                <a href="../1_the_basics_of_edk_ii/11_overview.html#11-overview">
            
                    
                    1.1 Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../1_the_basics_of_edk_ii/12_related_references.html">
            
                <a href="../1_the_basics_of_edk_ii/12_related_references.html#12-related-references">
            
                    
                    1.2 Related References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../1_the_basics_of_edk_ii/13_terms.html">
            
                <a href="../1_the_basics_of_edk_ii/13_terms.html#13-terms">
            
                    
                    1.3 Terms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../1_the_basics_of_edk_ii/14_target_audience.html">
            
                <a href="../1_the_basics_of_edk_ii/14_target_audience.html#14-target-audience">
            
                    
                    1.4 Target Audience
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../2_an_edk_ii_package/">
            
                <a href="../2_an_edk_ii_package/#2-an-edk-ii-package">
            
                    
                    2 An EDK II Package
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../2_an_edk_ii_package/21_introduction.html">
            
                <a href="../2_an_edk_ii_package/21_introduction.html#21-introduction">
            
                    
                    2.1 Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../2_an_edk_ii_package/22_manage_package.html">
            
                <a href="../2_an_edk_ii_package/22_manage_package.html#22-manage-package">
            
                    
                    2.2 Manage Package
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="./">
            
                <a href="./#3-module-development">
            
                    
                    3 Module Development
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="31_what_is_an_edk_ii_module.html">
            
                <a href="31_what_is_an_edk_ii_module.html#31-what-is-an-edk-ii-module">
            
                    
                    3.1 What is an EDK II module?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="32_creating_a_module.html">
            
                <a href="32_creating_a_module.html#32-creating-a-module">
            
                    
                    3.2 Creating a Module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="33_additional_steps_for_library_instances.html">
            
                <a href="33_additional_steps_for_library_instances.html#33-additional-steps-for-library-instances">
            
                    
                    3.3 Additional Steps for Library Instances
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="34_additional_steps_for_driver.html">
            
                <a href="34_additional_steps_for_driver.html#34-additional-steps-for-driver">
            
                    
                    3.4 Additional Steps for Driver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="35_edk_ii_common_library_class.html">
            
                <a href="35_edk_ii_common_library_class.html#35-edk-ii-common-library-class">
            
                    
                    3.5 EDK II Common Library Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="36_module_using_hii.html">
            
                <a href="36_module_using_hii.html#36-module-using-hii">
            
                    
                    3.6 Module using HII
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="37_building_the_module.html">
            
                <a href="37_building_the_module.html#37-building-the-module">
            
                    
                    3.7 Building the module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.8" data-path="38_debugging_a_module.html">
            
                <a href="38_debugging_a_module.html#38-debugging-a-module">
            
                    
                    3.8 Debugging a Module
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../4_uefi_applications/">
            
                <a href="../4_uefi_applications/#4-uefi-applications">
            
                    
                    4 UEFI Applications
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../4_uefi_applications/41_begin_with_inf_file.html">
            
                <a href="../4_uefi_applications/41_begin_with_inf_file.html#41-begin-with-inf-file">
            
                    
                    4.1 Begin with INF file
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../4_uefi_applications/42_write_uefi_application_entry_point.html">
            
                <a href="../4_uefi_applications/42_write_uefi_application_entry_point.html#42-write-uefi-application-entry-point">
            
                    
                    4.2 Write UEFI Application Entry Point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../4_uefi_applications/43_get_service_tables.html">
            
                <a href="../4_uefi_applications/43_get_service_tables.html#43-get-service-tables">
            
                    
                    4.3 Get Service Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../4_uefi_applications/44_communicating_with_a_uefi_driver.html">
            
                <a href="../4_uefi_applications/44_communicating_with_a_uefi_driver.html#44-communicating-with-a-uefi-driver">
            
                    
                    4.4 Communicating with a UEFI driver
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../5_uefi_drivers/">
            
                <a href="../5_uefi_drivers/#5-uefi-drivers">
            
                    
                    5 UEFI Drivers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../5_uefi_drivers/51_begin_with_inf_file.html">
            
                <a href="../5_uefi_drivers/51_begin_with_inf_file.html#51-begin-with-inf-file">
            
                    
                    5.1 Begin With INF File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../5_uefi_drivers/52_write_the_uefi_driver_entry_point.html">
            
                <a href="../5_uefi_drivers/52_write_the_uefi_driver_entry_point.html#52-write-the-uefi-driver-entry-point">
            
                    
                    5.2 Write the UEFI Driver entry point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../5_uefi_drivers/53_get_service_tables.html">
            
                <a href="../5_uefi_drivers/53_get_service_tables.html#53-get-service-tables">
            
                    
                    5.3 Get Service Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../5_uefi_drivers/54_communication_between_uefi_drivers.html">
            
                <a href="../5_uefi_drivers/54_communication_between_uefi_drivers.html#54-communication-between-uefi-drivers">
            
                    
                    5.4 Communication between UEFI Drivers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../6_sec_module/">
            
                <a href="../6_sec_module/#6-sec-module">
            
                    
                    6 SEC Module
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../6_sec_module/61_beginning_to_write_the_inf_file.html">
            
                <a href="../6_sec_module/61_beginning_to_write_the_inf_file.html#61-beginning-to-write-the-inf-file">
            
                    
                    6.1 Beginning to Write the INF File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../6_sec_module/62_setup_pre-memory_environment.html">
            
                <a href="../6_sec_module/62_setup_pre-memory_environment.html#62-setup-pre-memory-environment">
            
                    
                    6.2 Setup Pre-Memory Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../6_sec_module/63_prepare_for_data_pei_foundation.html">
            
                <a href="../6_sec_module/63_prepare_for_data_pei_foundation.html#63-prepare-for-data-pei-foundation">
            
                    
                    6.3 Prepare for Data PEI Foundation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../7_pre-efi_initialization_modules/">
            
                <a href="../7_pre-efi_initialization_modules/#7-pre-efi-initialization-modules">
            
                    
                    7 Pre-EFI Initialization Modules
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../7_pre-efi_initialization_modules/71_introduction.html">
            
                <a href="../7_pre-efi_initialization_modules/71_introduction.html#71-introduction">
            
                    
                    7.1 Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../7_pre-efi_initialization_modules/72_beginning_to_write_a_peim_inf_file.html">
            
                <a href="../7_pre-efi_initialization_modules/72_beginning_to_write_a_peim_inf_file.html#72-beginning-to-write-a-peim-inf-file">
            
                    
                    7.2 Beginning to Write a PEIM INF File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../7_pre-efi_initialization_modules/73_defining_a_peims_entry_point.html">
            
                <a href="../7_pre-efi_initialization_modules/73_defining_a_peims_entry_point.html#73-defining-a-peims-entry-point">
            
                    
                    7.3 Defining a PEIM's entry point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../7_pre-efi_initialization_modules/74_get_pei_services.html">
            
                <a href="../7_pre-efi_initialization_modules/74_get_pei_services.html#74-get-pei-services">
            
                    
                    7.4 Get Pei Services
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="../7_pre-efi_initialization_modules/75_communicate_between_peim_modules.html">
            
                <a href="../7_pre-efi_initialization_modules/75_communicate_between_peim_modules.html#75-communicate-between-peim-modules">
            
                    
                    7.5 Communicate between PEIM Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="../7_pre-efi_initialization_modules/76_communicate_with_dxe_modules.html">
            
                <a href="../7_pre-efi_initialization_modules/76_communicate_with_dxe_modules.html#76-communicate-with-dxe-modules">
            
                    
                    7.6 Communicate with DXE Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.7" data-path="../7_pre-efi_initialization_modules/77_boot_mode.html">
            
                <a href="../7_pre-efi_initialization_modules/77_boot_mode.html#77-boot-mode">
            
                    
                    7.7 Boot Mode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.8" data-path="../7_pre-efi_initialization_modules/78_execution_in_place_peims.html">
            
                <a href="../7_pre-efi_initialization_modules/78_execution_in_place_peims.html#78-execution-in-place-peims">
            
                    
                    7.8 Execution in Place PEIMs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.9" data-path="../7_pre-efi_initialization_modules/79_dependency_for_peims.html">
            
                <a href="../7_pre-efi_initialization_modules/79_dependency_for_peims.html#79-dependency-for-peims">
            
                    
                    7.9 Dependency for PEIMs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../8_dxe_drivers_non-uefi_drivers/">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/#8-dxe-drivers-non-uefi-drivers">
            
                    
                    8 DXE Drivers: non-UEFI drivers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../8_dxe_drivers_non-uefi_drivers/81_beginning_with_inf_file.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/81_beginning_with_inf_file.html#81-beginning-with-inf-file">
            
                    
                    8.1 Beginning with INF File
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../8_dxe_drivers_non-uefi_drivers/82_write_dxe_driver_entry_point.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/82_write_dxe_driver_entry_point.html#82-write-dxe-driver-entry-point">
            
                    
                    8.2 Write DXE Driver Entry Point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../8_dxe_drivers_non-uefi_drivers/83_obtaining_services_tables.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/83_obtaining_services_tables.html#83-obtaining-services-tables">
            
                    
                    8.3 Obtaining Services Tables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../8_dxe_drivers_non-uefi_drivers/84_communication_between_dxe_drivers.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/84_communication_between_dxe_drivers.html#84-communication-between-dxe-drivers">
            
                    
                    8.4 Communication between DXE Drivers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../8_dxe_drivers_non-uefi_drivers/85_communication_with_peims.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/85_communication_with_peims.html#85-communication-with-peims">
            
                    
                    8.5 Communication with PEIMs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../8_dxe_drivers_non-uefi_drivers/86_dependency_expressions.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/86_dependency_expressions.html#86-dependency-expressions">
            
                    
                    8.6 Dependency Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="../8_dxe_drivers_non-uefi_drivers/87_handler_for_evtsignal_exit_boot_services.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/87_handler_for_evtsignal_exit_boot_services.html#87-handler-for-evt_signal_exit_boot_services">
            
                    
                    8.7 Handler for EVT_SIGNAL_EXIT_BOOT_SERVICES
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="../8_dxe_drivers_non-uefi_drivers/88_dxe_runtime_driver.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/88_dxe_runtime_driver.html#88-dxe-runtime-driver">
            
                    
                    8.8 DXE Runtime Driver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="../8_dxe_drivers_non-uefi_drivers/89_dxe_sal_driver.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/89_dxe_sal_driver.html#89-dxe-sal-driver">
            
                    
                    8.9 DXE SAL Driver
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="../8_dxe_drivers_non-uefi_drivers/810_dxe_smm_driver.html">
            
                <a href="../8_dxe_drivers_non-uefi_drivers/810_dxe_smm_driver.html#810-dxe-smm-driver">
            
                    
                    8.10 DXE SMM Driver
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../appendix_a_dynamic_pcd.html">
            
                <a href="../appendix_a_dynamic_pcd.html#appendix-a-dynamic-pcd">
            
                    
                    Appendix A Dynamic PCD
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >3.6 Module using HII</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <!--- @file
  3.6 Module using HII

  Copyright (c) 2010-2018, Intel Corporation. All rights reserved.<BR>

  Redistribution and use in source (original document form) and 'compiled'
  forms (converted to PDF, epub, HTML and other formats) with or without
  modification, are permitted provided that the following conditions are met:

  1) Redistributions of source code (original document form) must retain the
     above copyright notice, this list of conditions and the following
     disclaimer as the first lines of this file unmodified.

  2) Redistributions in compiled form (transformed to other DTDs, converted to
     PDF, epub, HTML and other formats) must reproduce the above copyright
     notice, this list of conditions and the following disclaimer in the
     documentation and/or other materials provided with the distribution.

  THIS DOCUMENTATION IS PROVIDED BY TIANOCORE PROJECT "AS IS" AND ANY EXPRESS OR
  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO
  EVENT SHALL TIANOCORE PROJECT  BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
  OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
  OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS DOCUMENTATION, EVEN IF
  ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<h2 id="36-module-using-hii">3.6 Module using HII</h2>
<p>DXE Modules can publish or update the following resources used in the browser
during the BDS phase:</p>
<p><strong>Forms</strong></p>
<p>Describes what type of content needs to be displayed to the user.</p>
<p><strong>Strings</strong></p>
<p>The text-based (UCS-2 encoded) representations of the information typically
being referenced by the forms.</p>
<p><strong>Font/Image</strong></p>
<p>The contents rendered on a local system.</p>
<p>Please refer to the <em>UEFI Specification</em>, Chapter 27, Human Interface
Infrastructure Overview.</p>
<h3 id="361-forms">3.6.1 Forms</h3>
<h4 id="3611-create-vfr-resource-file">3.6.1.1 Create VFR resource file</h4>
<p>The VFR file is used to describe form resources, per the example below. A VFR
file is put into a module&apos;s directory and referenced in the INF file [Sources]
section, just as with other source code.</p>
<pre><code class="lang-c">Example:
VFR file
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FORMSET_GUID { 0x9e0c30bc, 0x3f06, 0x4ba6, 0x82, 0x88, 0x9,</span>
<span class="hljs-number">0x17</span>, <span class="hljs-number">0x9b</span>, <span class="hljs-number">0x85</span>, <span class="hljs-number">0x5d</span>, <span class="hljs-number">0xbe</span>
}
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_CLASS 0x0000</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_SUBCLASS 0x0002</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_FORM_ID 0x1000</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_ITEM_ONE 0x0001</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_ITEM_TWO 0x0002</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_ITEM_THREE 0x0003</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_ITEM_FOUR 0x0004</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_ITEM_FIVE 0x0005</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_KEY_CONTINUE 0x1000</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_KEY_LANGUAGE 0x1234</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_KEY_BOOT_MANAGER 0x1064</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_KEY_DEVICE_MANAGER 0x8567</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> FRONT_PAGE_KEY_BOOT_MAINTAIN 0x9876</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LABEL_SELECT_LANGUAGE 0x1000</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LABEL_TIMEOUT 0x2000</span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> LABEL_END 0xffff</span>
formset guid = FORMSET_GUID, title = STRING_TOKEN (
                                       STR_FRONT_PAGE_TITLE),
                                       help = STRING_TOKEN (STR_NULL_STRING),
                                       classguid = EFI_HII_PLATFORM_SETUP_FORMSET_GUID,
                                       form formid = FRONT_PAGE_FORM_ID, title = STRING_TOKEN (STR_FRONT_PAGE_TITLE
                                       );
banner title = STRING_TOKEN (STR_FRONT_PAGE_COMPUTER_MODEL), line <span class="hljs-number">0</span>, align left;
banner title = STRING_TOKEN (STR_FRONT_PAGE_CPU_MODEL), line <span class="hljs-number">1</span>, align left;
banner title = STRING_TOKEN (STR_FRONT_PAGE_CPU_SPEED), line <span class="hljs-number">1</span>, align right;
banner title = STRING_TOKEN (STR_FRONT_PAGE_BIOS_VERSION), line <span class="hljs-number">2</span>, align left;
banner title = STRING_TOKEN (STR_FRONT_PAGE_MEMORY_SIZE), line <span class="hljs-number">2</span>, align right;
<span class="hljs-keyword">goto</span> FRONT_PAGE_ITEM_ONE, prompt = STRING_TOKEN (STR_CONTINUE_PROMPT), help = STRING_TOKEN (STR_CONTINUE_HELP),
                          flags = INTERACTIVE,
                          key = FRONT_PAGE_KEY_CONTINUE;
label LABEL_SELECT_LANGUAGE;
<span class="hljs-comment">//</span>
<span class="hljs-comment">// This is where we will dynamically add a OneOf type op-code to select</span>
<span class="hljs-comment">// Languages from the currently available choices</span>
<span class="hljs-comment">//</span>
label LABEL_END;
<span class="hljs-keyword">goto</span> FRONT_PAGE_ITEM_THREE, prompt = STRING_TOKEN (STR_BOOT_MANAGER), help = STRING_TOKEN (STR_BOOT_MANAGER_HELP),
                            flags = INTERACTIVE, key = FRONT_PAGE_KEY_BOOT_MANAGER;
<span class="hljs-keyword">goto</span> FRONT_PAGE_ITEM_FOUR, prompt = STRING_TOKEN (STR_DEVICE_MANAGER), help = STRING_TOKEN (STR_DEVICE_MANAGER_HELP),
                           flags = INTERACTIVE, key = FRONT_PAGE_KEY_DEVICE_MANAGER;
<span class="hljs-keyword">goto</span> FRONT_PAGE_ITEM_FIVE, prompt = STRING_TOKEN (STR_BOOT_MAINT_MANAGER),
                           help = STRING_TOKEN (STR_BOOT_MAINT_MANAGER_HELP), flags = INTERACTIVE, key = FRONT_PAGE_KEY_BOOT_MAINTAIN;
endform;
endformset;
</code></pre>
<h4 id="3612-publish-the-form-data">3.6.1.2 Publish the Form data</h4>
<p>When building, VfrCompile will &quot;build&quot; a .vfr file into the IFR binary as a
global array variable in the module image. The name of the global array
variable is <code>&lt;VfrFileName&gt;</code> + Bin.</p>
<p>For example, the content of Inventory.vfr in the</p>
<p>MdeModulePkg\Universal\DriverSampleDxe driver is compiled into the global array
variable InventoryBin.</p>
<p>Module developers should use the following code to publish the VFR global array
variable into the HII database:</p>
<pre><code class="lang-c"><span class="hljs-comment">//</span>
<span class="hljs-comment">// Create HII driver handle, paramter DriverHandle will hold the</span>
<span class="hljs-comment">// returned new handle.</span>
<span class="hljs-comment">// HiiLibCreateHiiDriverHandle defined in UefiHiiLib library class.</span>
<span class="hljs-comment">//</span>
Status = HiiLibCreateHiiDriverHandle (&amp;DriverHandle);
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Prepare HII package list, parameter InventoryBin is the VFR form data</span>
<span class="hljs-comment">// HiiLibPreparePackageList defined in UefiHiiLib library class</span>
<span class="hljs-comment">//</span>
PackageList = HiiLibPreparePackageList (
                <span class="hljs-number">2</span>,
                &amp;mInventoryGuid,
                InventoryBin,
                DriverSampleStrings
                );
ASSERT (PackageList != <span class="hljs-literal">NULL</span>);
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Create package into HII database via EFI_HII_PROTOCOL-</span>
&gt; NewPackageList
<span class="hljs-comment">//</span>
Status = gHiiDatabase-&gt;NewPackageList (
                         gHiiDatabase,
                         PackageList,
                         DriverHandle,
                         &amp;HiiHandle
                         );
</code></pre>
<p>When a driver only produces one <code>formset</code> in a VFR file, the IFR binary could
be put into a driver&apos;s binary as a PE resource section by setting
UEFI_HII_RESOURCE_SECTION to TRUE in the driver&apos;s INF file:</p>
<pre><code class="lang-ini">[Defines]
  INF_VERSION    = 0x00010005
  BASE_NAME      = HiiResourcesSample
  FILE_GUID      = D49D2EB0-44D5-4621-9FD6-1A92C9109B99
  MODULE_TYPE    = UEFI_DRIVER
  VERSION_STRING = 1.0
  ENTRY_POINT    = HiiResourcesSampleInit
  UNLOAD_IMAGE   = HiiResourcesSampleUnload
  #
  # This flag specifies whether HII resource section is generated into PE image.
  #
  UEFI_HII_RESOURCE_SECTION = TRUE
</code></pre>
<p>Module developers should use the following code to publish HII package data
into the HII database:</p>
<pre><code class="lang-c"><span class="hljs-comment">//</span>
<span class="hljs-comment">// Retrieve HII package list from ImageHandle</span>
<span class="hljs-comment">//</span>
Status = gBS-&gt;OpenProtocol (
                ImageHandle,
                &amp;gEfiHiiPackageListProtocolGuid,
                (VOID **) &amp;PackageList,
                ImageHandle,
                <span class="hljs-literal">NULL</span>,
                EFI_OPEN_PROTOCOL_GET_PROTOCOL
                );
<span class="hljs-keyword">if</span> (EFI_ERROR (Status))
{
  <span class="hljs-keyword">return</span> Status;
}
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Publish sample Fromset</span>
<span class="hljs-comment">//</span>
Status = gBS-&gt;InstallProtocolInterface (
                &amp;mDriverHandle,
                &amp;gEfiDevicePathProtocolGuid,
                EFI_NATIVE_INTERFACE,
                &amp;mHiiVendorDevicePath
                );
<span class="hljs-keyword">if</span> (EFI_ERROR (Status))
{
  <span class="hljs-keyword">return</span> Status;
}
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Publish HII package list to HII Database.</span>
<span class="hljs-comment">//</span>
Status = gHiiDatabase-&gt;NewPackageList (
                         gHiiDatabase,
                         PackageList,
                         mDriverHandle,
                         &amp;mHiiHandle
                         );
<span class="hljs-keyword">if</span> (EFI_ERROR (Status))
{
  <span class="hljs-keyword">return</span> Status;
}
</code></pre>
<h3 id="362-using-unicode-strings">3.6.2 Using Unicode Strings</h3>
<h4 id="3621-create-uni-file">3.6.2.1 Create .uni file</h4>
<p>The Unicode strings are put into the .uni file and referenced in the module&apos;s
INF [Sources] section like others C files. The .uni file is encoding UCS-2 with
a 0xFFFE BOM header. For example:</p>
<pre><code>/=# 

#langdef en-US &quot;English&quot; 

#langdef fr-FR &quot;Francais&quot; 

#string STR_INV_FORM_SET_TITLE #language en-US &quot;Network 

Controller Information&quot; 

#language fr-FR &quot;Mi motor Espa&#xF1;ol de arreglo&quot;

#string STR_INV_FORM_SET_HELP #language en-US &quot;The ABC Network Controller
version information, which includes Firmware versions as well as supported
characteristics&quot;

#language fr-FR &quot;The ABC Network Controller version information, which
includes Firmware versions as well as supported characteristics&quot;

#string STR_INV_FORM1_TITLE #language en-US &quot;ABC Network

Controller Version Data&quot;

#language fr-FR &quot;Mi Primero

Arreglo P&#xE1;gina&quot;

#string STR_INV_VERSION_TEXT #language en-US &quot;Firmware

Revision Date: 02/03/2002&quot;

#language fr-FR &quot;Firmware

Revision Date: 02/03/2002&quot;

#string STR_INV_VERSION_HELP #language en-US &quot;The date of the revision of the
Firmware being used.&quot;

#language fr-FR &quot;The date of the revision of the Firmware being used.&quot;
</code></pre><h4 id="3622-publish-the-unicode-string-file">3.6.2.2 Publish the Unicode String file</h4>
<pre><code class="lang-c">The file content in .uni file will be parsed

and compiled by build tool to a binary <span class="hljs-built_in">string</span> package <span class="hljs-built_in">array</span> <span class="hljs-keyword">for</span> a module. The name of binary <span class="hljs-built_in">array</span> is constructed as

&lt;ModuleName&gt; { + <span class="hljs-string">&quot;Strings&quot;</span>. For example, the inventorystring.uni defined in MdeModulePkg\Universal\DriverSampleDxe is compiled to binary <span class="hljs-built_in">array</span>: <span class="hljs-keyword">extern</span> UINT8 DriverSampleStrings[]; }
</code></pre>
<p>Module developers should use the following codes to publish the strings array
variable into the HII database:</p>
<pre><code class="lang-c"><span class="hljs-comment">//</span>
<span class="hljs-comment">// Create HII driver handle, paramter DriverHandle will hold the</span>
<span class="hljs-comment">// returned new handle.</span>
<span class="hljs-comment">// HiiLibCreateHiiDriverHandle defined in UefiHiiLib library class.</span>
<span class="hljs-comment">//</span>
Status = HiiLibCreateHiiDriverHandle (&amp;DriverHandle);
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Prepare HII package list, parameter DriverSampleStrings is the</span>
<span class="hljs-comment">// strings binary data.</span>
<span class="hljs-comment">// HiiLibPreparePackageList defined in UefiHiiLib library class</span>
<span class="hljs-comment">//</span>
PackageList = HiiLibPreparePackageList (
                <span class="hljs-number">2</span>,
                &amp;mFormSetGuid,
                DriverSampleStrings,
                VfrBin
                );
<span class="hljs-keyword">if</span> (PackageList == <span class="hljs-literal">NULL</span>)
{
  <span class="hljs-keyword">return</span> EFI_OUT_OF_RESOURCES;
}
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Create package into HII database via EFI_HII_PROTOCOL-</span>
&gt; NewPackageList
<span class="hljs-comment">//</span>
Status = HiiDatabase-&gt;NewPackageList (
                        HiiDatabase,
                        PackageList,
                        DriverHandle[<span class="hljs-number">0</span>],
                        &amp;HiiHandle[<span class="hljs-number">0</span>]
                        );
</code></pre>
<p>As with other types HII resources, if a module publishs the HII data into a PE
resource section, UEFI_HII_RESOURCE_SECTION is set to TRUE in the module&apos;s INF
file and the following code is used:</p>
<pre><code class="lang-c"><span class="hljs-comment">//</span>
<span class="hljs-comment">// Retrieve HII package list from ImageHandle</span>
<span class="hljs-comment">//</span>
Status = gBS-&gt;OpenProtocol (
                ImageHandle,
                &amp;gEfiHiiPackageListProtocolGuid,
                (VOID **) &amp;PackageList,
                ImageHandle,
                <span class="hljs-literal">NULL</span>,
                EFI_OPEN_PROTOCOL_GET_PROTOCOL
                );
<span class="hljs-keyword">if</span> (EFI_ERROR (Status))
{
  <span class="hljs-keyword">return</span> Status;
}
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Publish sample Fromset</span>
<span class="hljs-comment">//</span>
Status = gBS-&gt;InstallProtocolInterface (
                &amp;mDriverHandle,
                &amp;gEfiDevicePathProtocolGuid,
                EFI_NATIVE_INTERFACE,
                &amp;mHiiVendorDevicePath
                );
<span class="hljs-keyword">if</span> (EFI_ERROR (Status))
{
  <span class="hljs-keyword">return</span> Status;
}
<span class="hljs-comment">//</span>
<span class="hljs-comment">// Publish HII package list to HII Database.</span>
<span class="hljs-comment">//</span>
Status = gHiiDatabase-&gt;NewPackageList (
                         gHiiDatabase,
                         PackageList,
                         mDriverHandle,
                         &amp;mHiiHandle
                         );
<span class="hljs-keyword">if</span> (EFI_ERROR (Status))
{
  <span class="hljs-keyword">return</span> Status;
}
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="35_edk_ii_common_library_class.html#35-edk-ii-common-library-class" class="navigation navigation-prev " aria-label="Previous page: 3.5 EDK II Common Library Class">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="37_building_the_module.html#37-building-the-module" class="navigation navigation-next " aria-label="Next page: 3.7 Building the module">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"3.6 Module using HII","level":"1.6.6","depth":2,"next":{"title":"3.7 Building the module","level":"1.6.7","depth":2,"anchor":"#37-building-the-module","path":"3_module_development/37_building_the_module.md","ref":"3_module_development/37_building_the_module.md#37-building-the-module","articles":[]},"previous":{"title":"3.5 EDK II Common Library Class","level":"1.6.5","depth":2,"anchor":"#35-edk-ii-common-library-class","path":"3_module_development/35_edk_ii_common_library_class.md","ref":"3_module_development/35_edk_ii_common_library_class.md#35-edk-ii-common-library-class","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{"draft":"yes","title":"EDK II Module Writer's Guide","version":"Revision 0.71"},"plugins":["puml-aleung"],"pluginsConfig":{"puml-aleung":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"3_module_development/36_module_using_hii.md","mtime":"2020-12-01T06:45:16.863Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-12-01T06:45:47.023Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

